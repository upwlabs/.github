task clearRNBundle() {
    doLast {
        exec {
            workingDir "$rootDir"
            commandLine 'sh', '-c', './script/prepare_rn.sh -c'
        }
    }

}

task mergeRNBundle() {
    doLast {
        def appName = project.rootDir.name.split('-')[0]
        def moduleName = project.name
        exec {
            workingDir "$rootDir"
            commandLine 'sh', '-c', "./script/prepare_rn.sh -m $moduleName -a $appName"
        }
    }
}

afterEvaluate {
    tasks.findAll { task -> task.name=='preBuild' }.each {
        it.dependsOn(mergeRNBundle)
    }
}